# yaml-language-server: $schema=https://schema.buildwithfern.dev/generators-yml.json

api:
  specs:
    - openapi: openapi.json
    - asyncapi: asyncapi.yaml

default-group: local

groups:
  # Local development - generates SDKs to local file system
  local:
    generators:
      - name: fernapi/fern-typescript-sdk
        version: 3.27.0
        config:
          shouldGenerateWebsocketClients: true
        output:
          location: local-file-system
          path: ../generated-sdks/typescript
      - name: fernapi/fern-python-sdk
        version: 4.32.2
        config:
          should_generate_websocket_clients: true
        output:
          location: local-file-system
          path: ../generated-sdks/python

  # Publish to npm (no GitHub required)
  npm:
    generators:
      - name: fernapi/fern-typescript-sdk
        version: 3.27.0
        config:
          shouldGenerateWebsocketClients: true
        output:
          location: npm
          package-name: "@aui.io/apollo-sdk"
          token: ${NPM_TOKEN}

  # Publish to PyPI (optional)
  pypi:
    generators:
      - name: fernapi/fern-python-sdk
        version: 4.32.2
        config:
          should_generate_websocket_clients: true
        output:
          location: pypi
          package-name: "aui-apollo-sdk"
          token: ${PYPI_TOKEN}

  # Publish both (npm + PyPI)
  publish-all:
    generators:
      - name: fernapi/fern-typescript-sdk
        version: 3.27.0
        config:
          shouldGenerateWebsocketClients: true
        output:
          location: npm
          package-name: "@aui.io/apollo-sdk"
          token: ${NPM_TOKEN}
      - name: fernapi/fern-python-sdk
        version: 4.32.2
        config:
          should_generate_websocket_clients: true
        output:
          location: pypi
          package-name: "aui-apollo-sdk"
          token: ${PYPI_TOKEN}
